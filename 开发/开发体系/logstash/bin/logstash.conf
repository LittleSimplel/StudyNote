input{
	stdin{
	 
	}
	jdbc{
		jdbc_connection_string => "jdbc:oracle:thin:@//192.168.10.173:1521/interlib"
		jdbc_user => "interlib"
		jdbc_password => "interlib"
		jdbc_driver_library => "C:\xtabd\driver\ojdbc6.jar"
		jdbc_driver_class => "Java::oracle.jdbc.driver.OracleDriver"
		record_last_run => "false"
		use_column_value => "false"
		clean_run => "false"
		jdbc_paging_enabled => "true"
		jdbc_page_size => "50000"
		statement => "SELECT b.BOOKRECNO,b.TITLE,b.AUTHOR,b.PUBLISHER,b.PUBDATE,b.ISBN,b.ISSN,b.CLASSNO,b.BOOKTYPE,b.SUBJECT,P.typename,A.ordersum FROM BIBLIOS b JOIN P_BOOKTYPE P ON b.BOOKTYPE = P .TYPENO LEFT JOIN (SELECT BOOKRECNO,SUM (TOTALLOANNUM) ordersum FROM holding GROUP BY BOOKRECNO) A ON b.bookrecno = A .bookrecno"
		schedule => "* * * * *"
		type => "bookInfo"
	}
	}
	 
output{
	elasticsearch{
		hosts => "114.115.239.137:9200"
		index => "xtabd_elastic"
		document_id => "%{bookrecno}"
		document_type => "bookInfo"
	}
	stdout {
		#以JSON格式输出
        codec => json_lines
    }
}


